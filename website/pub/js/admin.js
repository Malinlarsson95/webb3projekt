"use strict";let table;const url="http://localhost/webb3projekt/webservice/crud/";document.addEventListener("DOMContentLoaded",(function(){table="studies.php",fetch(url+table).then(e=>e.json()).then(e=>{let t="<h2>Studier</h2>";e.forEach((function(e){t+=`\n        <div class="mainboxes"> \n            <ul class="fa-ul">\n                <li><i class="fa-li fas fa-graduation-cap"></i><span class="header3">${e.educationName}</span></li>\n                <li><i class="fa-li fas fa-school"></i><span class="header4">${e.school}</span></li>\n                <li><i class="fa-li far fa-calendar-alt"></i><span class="timestamp">${e.startDate} - ${e.endDate}</span></li>\n            </ul>\n            <div class="update-delete">\n                <span class="updateStudy" data-id="${e._id}"><i class="fas fa-edit"style="color:green;"></i></span>\n                <span class="deleteStudy" data-id="${e._id}"><i class="fas fa-times-circle"style="color:red;"></i></span>\n            </div>\n            <div id="updateStudie${e._id}">\n            </div>\n        </div>\n        `})),document.getElementById("mainArtTwo").innerHTML=t;let a=document.getElementsByClassName("deleteStudy");for(let t=0;t<a.length;t++)a[t].addEventListener("click",(function(){let t={_id:this.dataset.id};table="studies.php",fetch(url+table,{method:"DELETE",headers:new Headers,body:JSON.stringify(t)}).then(t=>console.log(e)).catch(e=>console.log(e)),location.reload()}));let n=document.getElementsByClassName("updateStudy");for(let a=0;a<n.length;a++)n[a].addEventListener("click",(function(){let a=this.dataset.id;t='\n            <form class="add">\n            <input type="text" name ="educationName" id ="educationName" placeholder="Program/kurs"/><br>\n            <input type="text" name ="school" id ="school" placeholder="Skola"/><br>\n            <input type="text" name ="startDate" id ="startDate" placeholder="Start(åååå/mm)"/>\n            <input type="text" name ="endDate" id ="endDate" placeholder="Slut(åååå/mm)"/><br>\n            <input type="submit" name="addStudie" value="Uppdatera" id="UpdateStudieButton" class="okButton" />\n            </form>',document.getElementById("updateStudie"+a).innerHTML=t,UpdateStudieButton.addEventListener("click",(function(){let t=document.getElementById("educationName").value,n=document.getElementById("school").value,l=document.getElementById("startDate").value,d=document.getElementById("endDate").value,s={_id:a,school:n,educationName:t,startDate:l,endDate:d};table="studies.php",fetch(url+table,{method:"PUT",headers:new Headers,body:JSON.stringify(s)}).then(t=>console.log(e)).catch(e=>console.log(e)),location.reload()}))}))}),document.getElementById("AddStudieButton").addEventListener("click",(function(){let e=document.getElementById("educationName").value,t=document.getElementById("school").value,a=document.getElementById("startDate").value,n=document.getElementById("endDate").value,l={school:t,educationName:e,startDate:a,endDate:n};table="studies.php",fetch(url+table,{method:"POST",headers:new Headers,body:JSON.stringify(l)}).then(e=>console.log(data)).catch(e=>console.log(e)),location.reload()})),table="works.php",fetch(url+table).then(e=>e.json()).then(e=>{let t="<h2>Arbeten</h2>";e.forEach((function(e){t+=`\n        <div class="mainboxes"> \n            <ul class="fa-ul">\n                <li><i class="fa-li fas fa-briefcase"></i><span class="header3">${e.workTitle}</span></li>\n                <li><i class="fa-li fas fa-map-marker-alt"></i><span class="header4">${e.workPlace}</span></li>\n                <li><i class="fa-li far fa-calendar-alt"></i><span class="timestamp">${e.startDate} - ${e.endDate}</span></li>\n            </ul>\n            <div class="update-delete">\n                <span class="updateWork" data-id="${e._id}"><i class="fas fa-edit"style="color:green;"></i></span>\n                <span class="deleteWork" data-id="${e._id}"><i class="fas fa-times-circle"style="color:red;"></i></span>\n            </div>\n            <div id="updateWork${e._id}">\n            </div>\n        </div>\n        `})),document.getElementById("mainArtThree").innerHTML=t;let a=document.getElementsByClassName("deleteWork");for(let t=0;t<a.length;t++)a[t].addEventListener("click",(function(){let t={_id:this.dataset.id};table="works.php",fetch(url+table,{method:"DELETE",headers:new Headers,body:JSON.stringify(t)}).then(t=>console.log(e)).catch(e=>console.log(e)),location.reload()}));let n=document.getElementsByClassName("updateWork");for(let a=0;a<n.length;a++)n[a].addEventListener("click",(function(){let a=this.dataset.id;t='\n            <form class="add">\n            <input type="text" name ="workTitle" id ="workTitle" placeholder="Arbetstitel"/><br>\n            <input type="text" name ="workPlace" id ="workPlace" placeholder="Arbetsplats"/><br>\n            <input type="text" name ="startDateWork" id ="startDateWork" placeholder="Start(åååå/mm)"/>\n            <input type="text" name ="endDateWork" id ="endDateWork" placeholder="Slut(åååå/mm)"/><br>\n            <input type="submit" name="UpdateWorkButton" value="Uppdatera" id="UpdateWorkButton" class="okButton" />\n            </form>',document.getElementById("updateWork"+a).innerHTML=t,document.getElementById("UpdateWorkButton").addEventListener("click",(function(){let t=document.getElementById("workTitle").value,n=document.getElementById("workPlace").value,l=document.getElementById("startDateWork").value,d=document.getElementById("endDateWork").value,s={_id:a,workTitle:t,workPlace:n,startDate:l,endDate:d};table="works.php",fetch(url+table,{method:"PUT",headers:new Headers,body:JSON.stringify(s)}).then(t=>console.log(e)).catch(e=>console.log(e)),location.reload()}))}))}),document.getElementById("AddWorkButton").addEventListener("click",(function(){let e=document.getElementById("workTitle").value,t=document.getElementById("workPlace").value,a=document.getElementById("startDateWork").value,n=document.getElementById("endDateWork").value,l={workTitle:e,workPlace:t,startDate:a,endDate:n};table="works.php",fetch(url+table,{method:"POST",headers:new Headers,body:JSON.stringify(l)}).then(e=>console.log(data)).catch(e=>console.log(e)),location.reload()})),table="websites.php",fetch(url+table).then(e=>e.json()).then(e=>{let t="<h2>Skapade webbsidor</h2>";e.forEach((function(e){t+=`\n        <div class="mainboxes"> \n            <ul class="fa-ul">\n                <li><i class="fa-li fas fa-globe"></i><span class="header3">${e.siteTitle}</span></li>\n                <li><i class="fa-li fas fa-link"></i><span class="header4"><a href="${e.siteUrl}">Länk</a></span></li>\n                <li><i class="fa-li far fa-calendar-alt"></i><span class="timestamp">${e.createdDate}</span></li>\n            </ul>\n            <p class ="description">${e.siteDescription}</p>\n            <div class="update-delete">\n                <span class="updateWebsite" data-id="${e._id}"><i class="fas fa-edit"style="color:green;"></i></span>\n                <span class="deleteWebsite" data-id="${e._id}"><i class="fas fa-times-circle"style="color:red;"></i></span>\n            </div>\n            <div id="updateWebsite${e._id}">\n            </div>\n        </div>\n        `})),document.getElementById("mainArtFour").innerHTML=t;let a=document.getElementsByClassName("deleteWebsite");for(let n=0;n<a.length;n++){a[n].addEventListener("click",(function(){let t={_id:this.dataset.id};table="websites.php",fetch(url+table,{method:"DELETE",headers:new Headers,body:JSON.stringify(t)}).then(t=>console.log(e)).catch(e=>console.log(e)),location.reload()}));let l=document.getElementsByClassName("updateWebsite");for(let a=0;a<l.length;a++)l[a].addEventListener("click",(function(){let a=this.dataset.id;t='\n            <form class="add">\n            <input type="text" name ="siteTitle" id ="siteTitle" placeholder="Namn på webbplats"/><br>\n            <input type="text" name ="siteUrl" id ="siteUrl" placeholder="Url"/><br>\n            <input type="text" name ="createdDate" id ="createdDate" placeholder="Skapad(åååå/mm)"/>\n            <textarea id="siteDescription" rows="4">Beskrivning av webbplatsen</textarea>\n            <input type="submit" name="UpdateWebsiteButton" value="Uppdatera" id="UpdateWebsiteButton" class="okButton" />\n            </form>',document.getElementById("updateWebsite"+a).innerHTML=t,document.getElementById("UpdateWebsiteButton").addEventListener("click",(function(){let t=document.getElementById("siteTitle").value,n=document.getElementById("siteUrl").value,l=document.getElementById("createdDate").value,d=document.getElementById("siteDescription").value,s={_id:a,siteTitle:t,siteUrl:n,createdDate:l,siteDescription:d};table="websites.php",fetch(url+table,{method:"PUT",headers:new Headers,body:JSON.stringify(s)}).then(t=>console.log(e)).catch(e=>console.log(e)),location.reload()}))}))}}),document.getElementById("AddSiteButton").addEventListener("click",(function(){let e=document.getElementById("siteTitle").value,t=document.getElementById("siteUrl").value,a=document.getElementById("createdDate").value,n=document.getElementById("siteDescription").value,l={siteTitle:e,siteUrl:t,createdDate:a,siteDescription:n};table="websites.php",fetch(url+table,{method:"POST",headers:new Headers,body:JSON.stringify(l)}).then(e=>console.log(data)).catch(e=>console.log(e)),location.reload()}))}));